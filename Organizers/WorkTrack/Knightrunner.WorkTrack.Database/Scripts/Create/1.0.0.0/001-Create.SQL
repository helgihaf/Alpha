--
-- Autogenerated SQL script for database schema WorkTrack
-- Generated at 2011-09-04T00:14:28
-- Knightrunner.Library.Database.Schema.SqlServer.SqlServerScriptGenerator, Knightrunner.Library.Database.Schema.SqlServer, Version=1.1.0.39322, Culture=neutral, PublicKeyToken=ec73d1b06e4208fb

CREATE TABLE [dbo].[Projects]
(
	[Id] UniqueIdentifier NOT NULL,
	[Name] NVarChar(60) NOT NULL,
	[Description] NVarChar(250),
	[Active] Bit NOT NULL,
	[ExternalCode] NVarChar(20)
);

ALTER TABLE [dbo].[Projects] ADD CONSTRAINT [Projects_PK] PRIMARY KEY CLUSTERED
([Id]);

GO

CREATE TABLE [dbo].[Activities]
(
	[Id] UniqueIdentifier NOT NULL,
	[Name] NVarChar(60) NOT NULL,
	[Description] NVarChar(250),
	[Active] Bit NOT NULL,
	[ExternalCode] NVarChar(20),
	[Project] UniqueIdentifier
);

ALTER TABLE [dbo].[Activities] ADD CONSTRAINT [Activities_PK] PRIMARY KEY CLUSTERED
([Id]);

GO

CREATE TABLE [dbo].[Users]
(
	[Id] UniqueIdentifier NOT NULL,
	[Username] NVarChar(60),
	[Password] NVarChar(60),
	[FullName] NVarChar(60) NOT NULL,
	[WindowsAccount] NVarChar(300),
	[Active] Bit NOT NULL
);

ALTER TABLE [dbo].[Users] ADD CONSTRAINT [Users_PK] PRIMARY KEY CLUSTERED
([Id]);

CREATE UNIQUE INDEX [Users_IX_Username_WindowsAccount] ON [dbo].[Users]
([Username], [WindowsAccount]);

GO

CREATE TABLE [dbo].[WorkEntries]
(
	[Id] UniqueIdentifier NOT NULL,
	[User] UniqueIdentifier NOT NULL,
	[Start] DateTime NOT NULL,
	[End] DateTime,
	[Text] NVarChar(250),
	[Project] UniqueIdentifier,
	[Activity] UniqueIdentifier
);

ALTER TABLE [dbo].[WorkEntries] ADD CONSTRAINT [WorkEntries_PK] PRIMARY KEY CLUSTERED
([Id]);

GO

GO

ALTER TABLE [dbo].[Activities] WITH CHECK ADD CONSTRAINT [Activities_FK_Projects_Project] FOREIGN KEY
([Project]) REFERENCES [dbo].[Projects] ([Id]);
GO

GO

ALTER TABLE [dbo].[WorkEntries] WITH CHECK ADD CONSTRAINT [WorkEntries_FK_Users_User] FOREIGN KEY
([User]) REFERENCES [dbo].[Users] ([Id]);
ALTER TABLE [dbo].[WorkEntries] WITH CHECK ADD CONSTRAINT [WorkEntries_FK_Projects_Project] FOREIGN KEY
([Project]) REFERENCES [dbo].[Projects] ([Id]);
ALTER TABLE [dbo].[WorkEntries] WITH CHECK ADD CONSTRAINT [WorkEntries_FK_Activities_Activity] FOREIGN KEY
([Activity]) REFERENCES [dbo].[Activities] ([Id]);
GO

