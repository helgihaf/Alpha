--
-- Autogenerated SQL script for database schema Images
-- Generated at 2011-05-05T13:41:52
-- Knightrunner.Library.Database.Schema.SqlServer.SqlServerScriptGenerator, Knightrunner.Library.Database.Schema.SqlServer, Version=1.1.0.24650, Culture=neutral, PublicKeyToken=null

CREATE TABLE [dbo].[Images]
(
	[Id] Int IDENTITY NOT NULL,
	[Computer] NVarChar(250) NOT NULL,
	[FilePath] NVarChar(260),
	[FileSize] Bigint NOT NULL,
	[CreationTime] DateTime NOT NULL,
	[ModifiedTime] DateTime NOT NULL,
	[CameraMake] NVarChar(250),
	[TakenTime] DateTime,
	[ImageHash] Binary(16),
	[Description] NVarChar(4000)
);

ALTER TABLE [dbo].[Images] ADD CONSTRAINT [Images_PK] PRIMARY KEY CLUSTERED
([Id]);

GO

CREATE TABLE [dbo].[Tags]
(
	[Id] Int IDENTITY NOT NULL,
	[Text] NVarChar(60) NOT NULL
);

ALTER TABLE [dbo].[Tags] ADD CONSTRAINT [Tags_PK] PRIMARY KEY CLUSTERED
([Id]);

GO

CREATE TABLE [dbo].[ImageTags]
(
	[Image] Int NOT NULL,
	[Tag] Int NOT NULL
);

ALTER TABLE [dbo].[ImageTags] ADD CONSTRAINT [ImageTags_PK] PRIMARY KEY CLUSTERED
([Image], [Tag]);

GO

GO

GO

ALTER TABLE [dbo].[ImageTags] WITH CHECK ADD CONSTRAINT [ImageTags_FK_Images_Image] FOREIGN KEY
([Image]) REFERENCES [dbo].[Images] ([Id]);
ALTER TABLE [dbo].[ImageTags] WITH CHECK ADD CONSTRAINT [ImageTags_FK_Tags_Tag] FOREIGN KEY
([Tag]) REFERENCES [dbo].[Tags] ([Id]);
GO

